<!DOCTYPE html>
<html lang="en">

<!-- aca podes concatenar porque es una etiqueta ejs o sea js -->
<%- include('partials/head', { 
        title : 'Editar producto' 
    })%>

    <body class="login">
        <%- include('partials/header')%>

            <main class="container">
                <div class="row mt-5">
                    <div class="col-12 col-lg-8 mx-auto">
                        <div class="card">
                            <div class="card-body">
                                <div class="card-header">
                                    <h4 class="card-title">Editar Producto</h4>
                                </div>
                                <div class="card-body">
                                    <!-- el method de formularios tiene que ir por POST porque es informacion sensible -->
                                    <!-- poner el action="" con el update  -->
                                    <!-- no existe ninguna ruta que vaya por POST entonces necesitamos el method-override para usar el put -->
                                    <!-- con el method intalado te habilita utilizar el querystring: ?_method=PUT esto es para enviar los datos y actualice los recursos -->
                                    <form action="/products/update/<%= id %>?_method=PUT" method="POST" class="row">
                                        <div class="col-12 col-md-6 mb-3">
                                            <label for="formGroupExampleInput" class="form-label">Nombre</label>
                                            <!-- importante agregar atributo (name="") de lo contrario no viaja -->
                                            <!-- el value="<%= name %>" sale del destructuring de ...product y agregamos a los correspondientes-->
                                            <input type="text" class="form-control" id="formGroupExampleInput" placeholder="Nombre del producto" name="name" value="<%= name %>">
                                          </div>
                                          <div class="col-12 col-md-6 mb-3">
                                            <label for="formGroupExampleInput2" class="form-label">Marca</label>
                                            <select class="form-select" aria-label="Default select example" name="brand">
                                                
                                              <% brands.forEach(item => { %>
                                                <!-- hacemos un ifternario para las marcas -->
                                                <option <%= item.name === brand && 'selected' %> value="<%= item.name %>"><%= item.name %></option>
                                              <% }) %>
                                                
                                              </select>
                                          </div>
                                          <div class="col-12 col-md-6 mb-3">
                                            <!-- el for con el id tiene que coincidir -->
                                            <label for="price" class="form-label">Precio</label>
                                            <input type="number" class="form-control" id="price" name="price" value="<%= price %>">
                                          </div>
                                          <div class="col-12 col-md-6 mb-3">
                                            <label for="discount" class="form-label">Descuento</label>
                                            <input type="number" class="form-control" id="discount" name="discount" value="<%= discount %>">
                                          </div>
                                          
                                          <div class="col-12 mb-3">
                                            <label for="description" class="form-label">Descripcion</label>
                                            <textarea class="form-control" style="resize: none" name="description" id="description"><%= description %></textarea>
                                          </div>
                                          <div class="col-12 d-flex justify-content-end gap-2 mb-3">
                                            <label for="image" class="btn btn-secondary">Agregar imagen</label>
                                            <!-- input oculto -->
                                            <input hidden class="form-control" type="file" id="image">
                                            <button class="btn btn-success" type="submit">Guardar cambios</button>
                                          </div>
                                    </form>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </main>
    </body>

</html>